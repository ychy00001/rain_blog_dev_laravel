webpackJsonp([0],{69:function(t,e,a){var i=a(2)(a(70),a(71),!1,null,null,null);t.exports=i.exports},70:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"PageLoading",data:function(){return{}},methods:{},computed:{},watch:{}}},71:function(t,e){t.exports={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading_layout"},[e("img",{staticClass:"loading_img",attrs:{src:"/custom_resources/img/page_loading.gif",alt:"页面加载loading图"}})])}]}},79:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(80),s=a.n(i),n=a(69),r=a.n(n);e.default={name:"ArticleList",data:function(){return{articleLists:{},categoryName:"",isSearch:!0,search:"",categoryId:0,articleId:0,ajaxCount:0,ajaxTotal:1,pageSize:10,currentPage:1,count:0}},computed:{},methods:{getArticleList:function(){var t=this,e="/api/article/list?page="+this.currentPage;this.categoryId>0&&(e+="&category_id="+this.categoryId),axios.get(e).then(function(e){t.articleLists=e.data.data.data,t.pageSize=e.data.data.per_page,t.count=e.data.data.total,t.categoryName=e.data.data.category_name,t.loadAjaxFinish()}).catch(function(e){console.log(e),t.loadAjaxFinish()})},searchArticleList:function(){var t=this,e="/api/article/search?page="+this.currentPage+"&search="+this.search;axios.get(e).then(function(e){t.articleLists=e.data.data.data,t.pageSize=e.data.data.per_page,t.count=e.data.data.total,t.loadAjaxFinish()}).catch(function(e){console.log(e),t.loadAjaxFinish()})},pageChange:function(t){this.currentPage=t,this.getArticleList()},loadAjaxFinish:function(){this.ajaxCount++,this.ajaxCount===this.ajaxTotal&&this.$emit("load-layout-finish")}},watch:{$route:function(t,e){"articleList"===t.name?(this.isSearch=!1,this.ajaxCount=0,this.ajaxTotal=1,t.params.page?this.currentPage=parseInt(t.params.page):this.currentPage=1,t.params.category?this.categoryId=parseInt(t.params.category):this.categoryId=0,this.getArticleList()):"articleSearch"===t.name&&(this.isSearch=!0,this.ajaxCount=0,this.ajaxTotal=1,t.params.page?this.currentPage=parseInt(t.params.page):this.currentPage=1,t.params.search?this.search=t.params.search:this.search="",this.searchArticleList())}},created:function(){console.log("ArticleList组件")},mounted:function(){this.$route.params.page?this.currentPage=parseInt(this.$route.params.page):this.currentPage=1,"articleList"===this.$route.name?(this.isSearch=!1,this.$route.params.category?this.categoryId=parseInt(this.$route.params.category):this.categoryId=0,this.getArticleList()):"articleSearch"===this.$route.name&&(this.isSearch=!0,this.$route.params.search?this.search=this.$route.params.search:this.search="",this.searchArticleList())},components:{Pagination:s.a,PageLoading:r.a}}},80:function(t,e,a){var i=a(2)(a(81),a(82),!1,null,null,null);t.exports=i.exports},81:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Pagination",props:{perPages:{type:Number,default:5},pageIndex:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:1}},data:function(){return{index:this.pageIndex,limit:this.pageSize,size:this.total||1,showPrevMore:!1,showNextMore:!1}},methods:{prev:function(){this.index>1&&this.go(this.index-1)},next:function(){this.index<this.pages&&this.go(this.index+1)},first:function(){1!==this.index&&this.go(1)},last:function(){this.index!=this.pages&&this.go(this.pages)},go:function(t){this.index!==t&&(this.index=t,this.$emit("change",this.index))}},computed:{pages:function(){return Math.ceil(this.size/this.limit)},pagers:function(){var t=[],e=this.perPages,a=this.pages,i=this.index,s=(e-1)/2,n={start:i-s,end:i+s};n.start<1&&(n.end=n.end+(1-n.start),n.start=1),n.end>a&&(n.start=n.start-(n.end-a),n.end=a),n.start<1&&(n.start=1),this.showPrevMore=n.start>1,this.showNextMore=n.end<a;for(var r=n.start;r<=n.end;r++)t.push(r);return t}},watch:{pageIndex:function(t){this.index=t||1},pageSize:function(t){this.limit=t||10},total:function(t){this.size=t||1}}}},82:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"mo-paging"},[a("li",{class:["paging-item","paging-item--prev",{"paging-item--disabled":1===t.index}],on:{click:t.prev}},[t._v("\n        上一页\n    ")]),t._v(" "),a("li",{class:["paging-item","paging-item--first",{"paging-item--disabled":1===t.index}],on:{click:t.first}},[t._v("\n        首页\n    ")]),t._v(" "),t.showPrevMore?a("li",{class:["paging-item","paging-item--more"]},[t._v("...\n    ")]):t._e(),t._v(" "),t._l(t.pagers,function(e){return a("li",{class:["paging-item",{"paging-item--current":t.index===e}],on:{click:function(a){t.go(e)}}},[t._v(t._s(e)+"\n    ")])}),t._v(" "),t.showNextMore?a("li",{class:["paging-item","paging-item--more"]},[t._v("\n        ...\n    ")]):t._e(),t._v(" "),a("li",{class:["paging-item","paging-item--last",{"paging-item--disabled":t.index===t.pages}],on:{click:t.last}},[t._v("\n        尾页\n    ")]),t._v(" "),a("li",{class:["paging-item","paging-item--next",{"paging-item--disabled":t.index===t.pages}],on:{click:t.next}},[t._v("\n        下一页\n    ")])],2)},staticRenderFns:[]}},83:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-8 col-sm-8 column articleList"},[t.ajaxCount!=t.ajaxTotal?a("page-loading"):a("div",[a("header",{attrs:{id:"header-section"}},[a("h3",[t._v("文章列表")]),t._v(" "),a("div"),t._v(" "),t.isSearch?a("span",[t._v("搜索："+t._s(t.search))]):a("span",[t._v("分类："+t._s(t.categoryName))])]),t._v(" "),a("ul",t._l(t.articleLists,function(e,i){return a("li",[a("p",[a("a",{attrs:{href:"#/article/"+e.id}},[t._v(t._s(e.title))])]),t._v(" "),a("footer",[a("hr")])])})),t._v(" "),a("pagination",{attrs:{"page-index":t.currentPage,totla:t.count,"page-size":t.pageSize},on:{change:t.pageChange}})],1)],1)},staticRenderFns:[]}},88:function(t,e,a){var i=a(2)(a(79),a(83),!1,null,null,null);t.exports=i.exports}});